<!--
Copyright (C) 2016 iNuron NV

This file is part of Open vStorage Open Source Edition (OSE),
as available from

      http://www.openvstorage.org and
      http://www.openvstorage.com.

This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License v3 (GNU AGPLv3)
as published by the Free Software Foundation, in version 3 as it comes
in the LICENSE.txt file of the Open vStorage OSE distribution.

Open vStorage is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY of any kind.
-->
<section>
    <p data-bind="visible: shared.mode() !== 'full'">&nbsp;</p>
    <div class="row">
        <div class="col-md-4">
            <!-- Left column -->
            <div id="dashboard.panels.storagerouter" class="panel panel-default">
                <!-- StorageRouter -->
                <div class="panel-heading">
                    <b data-i18n="ovs:dashboard.panels.storagerouter.title"></b>
                    <div style="float:right;">
                        <span data-bind="visible: storageRoutersLoading() || failureDomainsLoading()"><i class="fa fa-spin" data-i18n="[html]ovs:icons.loading"></i></span>
                        <a data-bind="popover: {
                                          title: 'ovs:dashboard.panels.storagerouter.helptitle',
                                          content: 'ovs:dashboard.panels.storagerouter.helpcontent'
                                      }" class="hand fa noline" data-i18n="[html]ovs:icons.help"
                           style="margin-left: 5px; color: white;" role="button" tabindex="-1">
                        </a>
                    </div>
                </div>
                <div class="panel-body">
                    <div data-bind="lazylist: {
                                        displaymode: 'table', items: failureDomains,
                                        loadedObservable: 'loaded', colspan: 5
                                    }" >
                        <table data-dummy="dummy">
                            <thead data-part="head">
                                <tr>
                                    <th data-i18n="ovs:generic.failuredomains"></th>
                                    <th data-i18n="ovs:generic.storagerouters" colspan="4"></th>
                                </tr>
                            </thead>
                            <tbody data-dummy="dummy">
                                <tr data-part="table-entry">
                                        <td data-bind="shortText: name(), maxLength: 20"></td>
                                        <td style="padding-left: 0; padding-right: 0; width: 35px;">
                                            <span class="label label-success pointer"
                                                  data-bind="tooltip: 'ovs:generic.states.storagerouter.ok',
                                                             text: $root.orderedStorageRouters()[guid()].green"></span>
                                        </td>
                                        <td style="padding-left: 0; padding-right: 0; width: 35px;">
                                            <span class="label label-warning pointer"
                                                  data-bind="tooltip: 'ovs:generic.states.storagerouter.warning',
                                                             text: $root.orderedStorageRouters()[guid()].orange"></span>
                                        </td>
                                        <td style="padding-left: 0; padding-right: 0; width: 35px;">
                                            <span class="label label-danger pointer"
                                                  data-bind="tooltip: 'ovs:generic.states.storagerouter.failure',
                                                             text: $root.orderedStorageRouters()[guid()].red"></span>
                                        </td>
                                        <td style="padding-left: 0; padding-right: 0; width: 35px;">
                                            <span class="label pointer"
                                                  data-bind="tooltip: 'ovs:generic.states.storagerouter.unknown',
                                                             text: $root.orderedStorageRouters()[guid()].lightgrey"
                                                  style="background-color: #888888;"></span>
                                        </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                 </div>
            </div>
            <!-- ko foreach: shared.hooks.dashboards -->
                <div class="panel panel-default" data-bind="compose: $data.activator"></div>
            <!-- /ko -->
        </div>
        <div class="col-md-4">
            <!-- Center column -->
            <div class="panel panel-default">
                <!-- Cache -->
                <div class="panel-heading">
                    <b data-i18n="ovs:dashboard.panels.cache.title"></b>
                    <div style="float:right;">
                        <span data-bind="visible: vPoolsLoading()"><i class="fa fa-spin" data-i18n="[html]ovs:icons.loading"></i></span>
                        <a data-bind="popover: {
                                          title: 'ovs:dashboard.panels.cache.helptitle',
                                          content: 'ovs:dashboard.panels.cache.helpcontent'
                                      }" class="hand fa noline" data-i18n="[html]ovs:icons.help"
                           style="margin-left: 5px; color: white;" role="button" tabindex="-1">
                        </a>
                    </div>
                </div>
                <div class="panel-body" data-bind="gauge: { primary: cacheRatio, secondary: iops }"></div>
            </div>
        </div>
        <div class="col-md-4">
            <!-- Right column -->
            <div class="panel panel-default">
                <!-- Statistics -->
                <div class="panel-heading">
                    <b data-i18n="ovs:dashboard.panels.statistics.title"></b>
                    <div style="float:right;">
                        <span data-bind="visible: vPoolsLoading()"><i class="fa fa-spin" data-i18n="[html]ovs:icons.loading"></i></span>
                        <a data-bind="popover: {
                                          title: 'ovs:dashboard.panels.statistics.helptitle',
                                          content: 'ovs:dashboard.panels.statistics.helpcontent'
                                      }" class="hand fa noline" data-i18n="[html]ovs:icons.help"
                           style="margin-left: 5px; color: white;" role="button" tabindex="-1">
                        </a>
                    </div>
                </div>
                <div class="panel-body">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th data-i18n="ovs:generic.performance"></th>
                                <th data-i18n="ovs:generic.current"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-i18n="ovs:generic.iops"></td>
                                <td data-bind="text: iops"></td>
                            </tr>
                            <tr>
                                <td data-i18n="ovs:generic.readspeed"></td>
                                <td data-bind="text: readSpeed"></td>
                            </tr>
                            <tr>
                                <td data-i18n="ovs:generic.writespeed"></td>
                                <td data-bind="text: writeSpeed"></td>
                            </tr>
                            <tr>
                                <td data-i18n="ovs:generic.cacheratio"></td>
                                <td data-bind="text: cacheRatio"></td>
                            </tr>
                        </tbody>
                    </table>
                 </div>
            </div>
        </div>
    </div>
</section>
