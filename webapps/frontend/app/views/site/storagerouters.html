<!--
Copyright (C) 2016 iNuron NV

This file is part of Open vStorage Open Source Edition (OSE),
as available from

      http://www.openvstorage.org and
      http://www.openvstorage.com.

This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License v3 (GNU AGPLv3)
as published by the Free Software Foundation, in version 3 as it comes
in the LICENSE.txt file of the Open vStorage OSE distribution.

Open vStorage is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY of any kind.
-->
<section>
    <div>
        <h2 class="pull-left" data-i18n="ovs:storagerouters.title"></h2>
    </div>
    <div data-bind="pager: { loadData: loadStorageRouters, headers: storageRoutersHeaders, refreshInterval: 5000, controls: true }">
        <table data-dummy="dummy">
            <tr data-part="vitem" data-bind="attr: { id: 'storagerouter_' + guid() }">
                <td style="position: relative;">
                    <span data-bind="visible: loading()" style="position: absolute; top: 7px; left: -15px;">
                       <i class="fa fa-spin" data-i18n="[html]ovs:icons.loading"></i>
                    </span>
                    <span class="fa pointer" data-i18n="[html]ovs:icons.storagerouter"
                          data-bind="tooltip: 'ovs:generic.states.storagerouter.' + status(),
                                     style: { color: statusColor() }"></span>
                </td>
                <td>
                    <a data-bind="text: name, attr: { href: $root.shared.routing.loadHash('storagerouter-detail', { guid: guid }) }"></a>
                </td>
                <td><span data-bind="text: ipAddress"></span></td>
                <td>
                    <span data-bind="lazyloader: { item: pMachine, loadedObservable: 'loaded', undefinedLoading: false }">
                        <span data-part="lazy-entry" data-bind="tooltip: item().ipAddress(), text: item().name" class="pointer"></span>
                    </span>
                </td>
                <td>
                    <span data-bind="lazyloader: { item: pMachine, loadedObservable: 'loaded', undefinedLoading: false }">
                        <span data-part="lazy-entry" data-bind="text: $.t('ovs:generic.hypervisors.' + item().hvtype())"></span>
                    </span>
                </td>
                <td><span data-bind="text: vDisks().length"></span></td>
                <td><span data-bind="text: storedData"></span></td>
                <td><span data-bind="text: cacheRatio"></span></td>
                <td><span data-bind="text: iops"></span></td>
                <td><span data-bind="text: readSpeed"></span></td>
                <td><span data-bind="text: writeSpeed"></span></td>
                <td>
                    <span data-bind="lazyloader: { item: primaryFailureDomain, loadedObservable: 'loaded', undefinedLoading: false }">
                        <span data-part="lazy-entry" data-bind="text: item().name"></span>
                        <span data-part="lazy-entry-undefined">-</span>
                    </span>
                </td>
                <td>
                    <span data-bind="lazyloader: { item: secondaryFailureDomain, loadedObservable: 'loaded', undefinedLoading: false }">
                        <span data-part="lazy-entry" data-bind="text: item().name"></span>
                        <span data-part="lazy-entry-undefined">-</span>
                    </span>
                </td>
                <td>
                    <!-- ko if: scrubCapable() === false -->
                        <span class="fa" data-i18n="[html]ovs:icons.cancel_circle" style="color: red;"></span>
                    <!-- /ko -->
                    <!-- ko if: scrubCapable() === true -->
                        <span class="fa" data-i18n="[html]ovs:icons.check_circle" style="color: green;"></span>
                    <!-- /ko -->
                </td>
            </tr>
        </table>
    </div>
</section>
